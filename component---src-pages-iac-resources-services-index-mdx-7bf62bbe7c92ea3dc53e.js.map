{"version":3,"sources":["webpack:///./src/pages/iac-resources/services/index.mdx"],"names":["_frontmatter","makeShortcode","name","props","console","warn","PageDescription","AnchorLinks","AnchorLink","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","small","isMDXComponent"],"mappings":"yeAMO,IAAMA,EAAe,GAEtBC,EAAgB,SAAAC,GAAI,OAAI,SAA6BC,GAEzD,OADAC,QAAQC,KAAK,aAAeH,EAAO,2EAC5B,kBAASC,KAGZG,EAAkBL,EAAc,mBAChCM,EAAcN,EAAc,eAC5BO,EAAaP,EAAc,cAC3BQ,EAAc,CAClBT,gBAEIU,EAAYC,IACH,SAASC,EAAT,GAGZ,IAFDC,EAEC,EAFDA,WACGV,E,oIACF,mBACD,OAAO,YAACO,EAAD,KAAeD,EAAiBN,EAAhC,CAAuCU,WAAYA,EAAYC,QAAQ,cAa5E,YAACR,EAAD,CAAiBQ,QAAQ,mBACvB,kHAEF,iLACA,yQAAwP,mBAAGC,WAAW,KAAQ,CAC1Q,KAAQ,mGAD4O,QAAxP,OAGA,YAACR,EAAD,CAAaS,OAAK,EAACF,QAAQ,eAC7B,YAACN,EAAD,CAAYM,QAAQ,cAApB,cACA,YAACN,EAAD,CAAYM,QAAQ,cAApB,WACA,YAACN,EAAD,CAAYM,QAAQ,cAApB,MACA,YAACN,EAAD,CAAYM,QAAQ,cAApB,mBAEE,gJAA+H,mBAAGC,WAAW,KAAQ,CACjJ,KAAQ,wCADmH,iBAA/H,mDAGA,oCACA,wHACA,uBAAK,sBAAMA,WAAW,OAAU,CAC5B,UAAa,eACb,WAAc,qBACd,KAAQ,kBAHP,87IAoIL,iCACA,4EACA,uBAAK,sBAAMA,WAAW,OAAU,CAC5B,UAAa,eACb,WAAc,kBACd,KAAQ,eAHP,k7IAsIL,4BACA,mGAAoF,mBAAGA,WAAW,KAAQ,CACtG,KAAQ,mDADwE,gDAApF,OAGA,0FACA,uBAAK,sBAAMA,WAAW,OAAU,CAC5B,UAAa,eACb,WAAc,UACd,GAAI,GACJ,SAAS,IAJR,snBA8BL,wCACA,sDACA,+CACA,uBAAK,sBAAMA,WAAW,OAAU,CAC5B,UAAa,kBADZ,sCAKL,oCACA,uBAAK,sBAAMA,WAAW,OAAU,CAC5B,UAAa,kBADZ,yBAQTH,EAAWK,gBAAiB","file":"component---src-pages-iac-resources-services-index-mdx-7bf62bbe7c92ea3dc53e.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/Users/johandry/Workspace/ibm/att-cloudnative/ibmcloud-pattern-guide/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst PageDescription = makeShortcode(\"PageDescription\");\nconst AnchorLinks = makeShortcode(\"AnchorLinks\");\nconst AnchorLink = makeShortcode(\"AnchorLink\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    {\n      /*\n      The pattern to document the resources is like follow:\n      - Introduce the resource with an example\n      - List all or the most important input parameters\n      - If will be used, list the most important output parameters\n      - Provide instructions to get the value of the input parameters, either using `ibmcloud`, API or the Web console.\n      - If needed, instructions to execute the code either with Terraform or Schematics\n      */\n    }\n    <PageDescription mdxType=\"PageDescription\">\n      <p>{`Use of IaC to work with Cloud Services such as Managed Databases and  MQ (Message Queue)`}</p>\n    </PageDescription>\n    <p>{`This page contains example scripts for some of the following services.  You can directly navigate to the resource you are interested in using the links.`}</p>\n    <p>{`As you look at the PostgreSQL & MongoDB scripts, you will notice the similarity.  In fact, except for the ‘serviceID’, they are identical.  This is because the scripts are using Resource Management Resources.  You can find out more about it `}<a parentName=\"p\" {...{\n        \"href\": \"https://cloud.ibm.com/docs/terraform?topic=terraform-resource-mgmt-resources#resource-instance\"\n      }}>{`here`}</a>{`.  `}</p>\n    <AnchorLinks small mdxType=\"AnchorLinks\">\n  <AnchorLink mdxType=\"AnchorLink\">PostgreSQL</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">MongoDB</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">MQ</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Demo & Cleanup</AnchorLink>\n    </AnchorLinks>\n    <p>{`IBM Cloud Database offers many database options, each one being useful in a particular use-case.  You can refer to this `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.ibm.com/cloud/databases\"\n      }}>{`documentation`}</a>{` for more information on IBM Cloud Databases.  `}</p>\n    <h3>{`PostgreSQL`}</h3>\n    <p>{`Following script will create an instance of the PostgreSQL in the resource group you specify.  `}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\",\n        \"metastring\": \"path=postgreSQL.tf\",\n        \"path\": \"postgreSQL.tf\"\n      }}>{`// main.tf\n#*****************************************************************************\n# IBM Terraform Provider Documentation Block References\n#   IBM Provider:    https://cloud.ibm.com/docs/terraform?topic=terraform-provider-reference&-access-data-sources\n#   Resource Group:  https://cloud.ibm.com/docs/terraform?topic=terraform-resource-management-data-sources&-access-data-sources#resource-group\n#\n#   Database :       https://cloud.ibm.com/docs/terraform?topic=terraform-databases-resources#db\n#   Access Group:    https://cloud.ibm.com/docs/terraform?topic=terraform-iam-resources&-access-data-sources#iam-access-group-policy\n#*****************************************************************************\n\n##############################################################################\n# IBM Cloud Provider\n##############################################################################\n\nprovider \"ibm\" {\n  region             = \"\\${var.ibm_region}\"\n  generation         = 2\n  ibmcloud_timeout   = 60\n}\n\n##############################################################################\n\n\n\n##############################################################################\n# Resource group ID from name\n##############################################################################\ndata \"ibm_resource_group\" \"group\" {\n  name = \"\\${var.resource_group_name}\"\n}\n##############################################################################\n\n\n##############################################################################\n# Provision database instance\n##############################################################################\nresource \"ibm_database\" \"db_instance\" {\n  name              = \"\\${var.db_name}\"\n  plan              = \"\\${var.plan}\"\n  location          = \"\\${var.ibm_region}\"\n  service           = \"databases-for-postgresql\"\n  resource_group_id = \"\\${data.ibm_resource_group.group.id}\"\n\n  adminpassword                = \"\\${var.db_admin_password}\"\n  members_memory_allocation_mb = \"\\${var.db_memory_allocation}\"\n  members_disk_allocation_mb   = \"\\${var.db_disk_allocation}\"\n}\n##############################################################################\n\n\n##############################################################################\n# Grant User Access to Database\n# For simplification, this block is not used. You can assign access policies at the\n# account, resource group, service, instance using this type of block.\n##############################################################################\n# resource \"ibm_iam_access_group_policy\" \"ex2_db_policy\" {\n#  access_group_id = ibm_iam_access_group.labuser.id\n#  roles        = [\"Reader\"]\n\n#  resources = [{\n#    service = \"databases-for-postgresql\"\n#    resource_instance_id = element(split(\":\", ibm_database.db_instance.id),7)\n#  }\n#  ]\n# }\n##############################################################################\n\n// outputs.tf\n\noutput \"db_crn_id\" {\n  value = \"\\${ibm_database.db_instance.id}\"\n}\n/*\noutput \"db_connection_string\" {\n  value = \"http://\\${ibm_database.db_instance.connectionstrings.0.name}\"\n} */\n\noutput \"db_admin_userid\" {\n  value = \"\\${ibm_database.db_instance.adminuser}\"\n}\noutput \"db_version\" {\n  value = \"\\${ibm_database.db_instance.version}\"\n}\n\n// variables.tf\n\n\n\nvariable \"plan\" {\n  default = \"standard\"\n  description = \"Cloud Database Plan\"\n}\nvariable \"ibm_region\" {\n  default = \"us-south\"\n  description = \"Cloud Database region \"\n}\nvariable \"db_name\" {\n  default = \"ex2_test_db_lab\"\n  description = \"Database name\"\n}\nvariable \"resource_group_name\" {\n  description = \"IBM Cloud Resource Group Name\"\n}\nvariable \"db_admin_password\" {\n  default = \"password123\"\n  description = \"Database administration password\"\n}\n\nvariable \"db_memory_allocation\" {\n  default = \"3072\"\n  description = \"The amount of memory in megabytes for the database, split across all members. If not specified, the default setting of the database service is used, which can vary by database type.\"\n}\n\nvariable \"db_disk_allocation\" {\n  default = \"61440\"\n  description = \"The amount of disk space for the database, split across all members. If not specified, the default setting of the database service is used, which can vary by database type.\"\n}\n\nvariable \"user_username\"{\n  default = \"admin\"\n  description = \"name of the admin user for postgres database\"\n}\n\nvariable \"user_password\" {\n  default = \"password123\"\n  description = \"password for the lab database\"\n}\n`}</code></pre>\n    <h3>{`MongoDB`}</h3>\n    <p>{`Following script will create an instance of MongoDB`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\",\n        \"metastring\": \"file=mongodb.tf\",\n        \"file\": \"mongodb.tf\"\n      }}>{`// main.tf\n#*****************************************************************************\n# IBM Terraform Provider Documentation Block References\n#   IBM Provider:    https://cloud.ibm.com/docs/terraform?topic=terraform-provider-reference&-access-data-sources\n#   Resource Group:  https://cloud.ibm.com/docs/terraform?topic=terraform-resource-management-data-sources&-access-data-sources#resource-group\n#\n#   Database :       https://cloud.ibm.com/docs/terraform?topic=terraform-databases-resources#db\n#   Access Group:    https://cloud.ibm.com/docs/terraform?topic=terraform-iam-resources&-access-data-sources#iam-access-group-policy\n#*****************************************************************************\n\n##############################################################################\n# IBM Cloud Provider\n##############################################################################\n\nprovider \"ibm\" {\n  region             = \"\\${var.ibm_region}\"\n  generation         = 2\n  ibmcloud_timeout   = 60\n}\n\n##############################################################################\n\n\n\n##############################################################################\n# Resource group ID from name\n##############################################################################\ndata \"ibm_resource_group\" \"group\" {\n  name = \"\\${var.resource_group_name}\"\n}\n##############################################################################\n\n\n##############################################################################\n# Provision database instance\n##############################################################################\nresource \"ibm_database\" \"db_instance\" {\n  name              = \"\\${var.db_name}\"\n  plan              = \"\\${var.plan}\"\n  location          = \"\\${var.ibm_region}\"\n  service           = \"databases-for-mongodb\"\n  resource_group_id = \"\\${data.ibm_resource_group.group.id}\"\n\n  adminpassword                = \"\\${var.db_admin_password}\"\n  members_memory_allocation_mb = \"\\${var.db_memory_allocation}\"\n  members_disk_allocation_mb   = \"\\${var.db_disk_allocation}\"\n}\n##############################################################################\n\n\n##############################################################################\n# Grant User Access to Database\n# For simplification, this block is not used. You can assign access policies at the\n# account, resource group, service, instance using this type of block.\n##############################################################################\n# resource \"ibm_iam_access_group_policy\" \"ex2_db_policy\" {\n#  access_group_id = ibm_iam_access_group.labuser.id\n#  roles        = [\"Reader\"]\n\n#  resources = [{\n#    service = \"databases-for-mongodb\"\n#    resource_instance_id = element(split(\":\", ibm_database.db_instance.id),7)\n#  }\n#  ]\n# }\n##############################################################################\n\n// outputs.tf\n\noutput \"db_crn_id\" {\n  value = \"\\${ibm_database.db_instance.id}\"\n}\n/*\noutput \"db_connection_string\" {\n  value = \"http://\\${ibm_database.db_instance.connectionstrings.0.name}\"\n} */\n\noutput \"db_admin_userid\" {\n  value = \"\\${ibm_database.db_instance.adminuser}\"\n}\noutput \"db_version\" {\n  value = \"\\${ibm_database.db_instance.version}\"\n}\n\n// variables.tf\n\n\n\nvariable \"plan\" {\n  default = \"standard\"\n  description = \"Cloud Database Plan\"\n}\nvariable \"ibm_region\" {\n  default = \"us-south\"\n  description = \"Cloud Database region \"\n}\nvariable \"db_name\" {\n  default = \"ex2_test_db_lab\"\n  description = \"Database name\"\n}\nvariable \"resource_group_name\" {\n  description = \"IBM Cloud Resource Group Name\"\n}\nvariable \"db_admin_password\" {\n  default = \"password123\"\n  description = \"Database administration password\"\n}\n\nvariable \"db_memory_allocation\" {\n  default = \"3072\"\n  description = \"The amount of memory in megabytes for the database, split across all members. If not specified, the default setting of the database service is used, which can vary by database type.\"\n}\n\nvariable \"db_disk_allocation\" {\n  default = \"61440\"\n  description = \"The amount of disk space for the database, split across all members. If not specified, the default setting of the database service is used, which can vary by database type.\"\n}\n\nvariable \"user_username\"{\n  default = \"admin\"\n  description = \"name of the admin user for mongodb\"\n}\n\nvariable \"user_password\" {\n  default = \"password123\"\n  description = \"password for the lab database\"\n}\n\n\n`}</code></pre>\n    <h3>{`MQ`}</h3>\n    <p>{`Learn more about MQ in IBM Cloud by refering to this `}{`[documentation]`}{`{`}<a parentName=\"p\" {...{\n        \"href\": \"https://cloud.ibm.com/docs/services/mqcloud%7D\"\n      }}>{`https://cloud.ibm.com/docs/services/mqcloud}`}</a>{`.  `}</p>\n    <p>{`The script below creates an instance of MQ in your cloud account.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\",\n        \"metastring\": \"= mq.tf\",\n        \"\": \"\",\n        \"mq.tf\": true\n      }}>{`provider \"ibm\" {\n  generation = 2\n  region     = \"us-south\"\n}\n\ndata \"ibm_resource_group\" \"group\" {\n  name = \"Default\"               // create in the default group\n}\n\nresource \"ibm_resource_instance\" \"resource_instance\" {\n  name              = \"mq-instance-test\"\n  service           = \"mqcloud\"\n  plan              = \"default\" // custom , default or lite\n  location          = \"us-south\"\n  resource_group_id = data.ibm_resource_group.group.id\n  tags              = [\"message queue\", \"testmq\"]\n\n  //User can increase timeouts \n  timeouts {\n    create = \"15m\"\n    update = \"15m\"\n    delete = \"15m\"\n  }\n}\n`}</code></pre>\n    <h3>{`Demo & Cleanup`}</h3>\n    <p>{`For any of the above scripts,`}</p>\n    <p>{`To run the script, use`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`terraform init\nterraform apply\n`}</code></pre>\n    <p>{`To cleanup:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`terraform destroy\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}